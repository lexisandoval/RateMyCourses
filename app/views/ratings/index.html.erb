<h1 class="brand head">Recent Course Ratings</h1>

<%= form_for(:ratings, :html => { class: 'form' }, method: 'get') do %>
  <%= label_tag(:course_id, "Filter By Course:") %>
  <%= collection_select(:rating, :course_id, Course.alpha_subject, :id, :full_title, { include_blank: '' }) %>
  <br>
  <%= submit_tag("Filter") %>
<% end %>

<br><br>

<% if @ratings.blank? %>
  <h2>No ratings yet.</h2>
  <p class="main brand black">Submit a new rating <a class="no_underline main brand" style="color:#4ba4c7" href="/users/<%= current_user.id %>/ratings/new">here</a>.</p>
<% else %>
  <% @ratings.sort_by(&:updated_at).reverse.each do |rating| %>
    <div>
      <a class="no_underline" href="/courses/<%= rating.course.id %>"><h2 class="main brand black"><%= rating.course.full_title %></h2></a>

      <h3><% rating.stars.times do  %>
        <%= "â­‘" %>
      <% end %></h3>
      
      <%= rating.content_with_author %>
    </div><br>
  <% end %>
<% end %>